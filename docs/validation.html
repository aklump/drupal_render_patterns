<!DOCTYPE html>

<html>
<head>
  <title>Property Validation</title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--validation">
<header>
  <div class="pager"><a href="dependency-injection.html" class="prev dependency-injection">&laquo;Patterns and Dependency Injection</a><a href="index.html" class="index pager__book-title">Render Patterns</a><a href="ROADMAP.html" class="next roadmap">Roadmap&raquo;</a></div></header>
<section class="sub-header">
  <div class="breadcrumbs"><a href="index.html">Index</a>
         &raquo
      </div>      <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>
  </section>


<h1>Property Validation</h1>

<section>

<p>Validation is based
on <a href="https://json-schema.org/latest/json-schema-validation.html">JSON Schema</a>.
However we're not using JSON at all, but rather the <code>pattern::$properties</code>
property on your class. The API structured however follows JSON schema and you
will build an array following those guidelines. In most cases, <code>$properties</code> is
the only key of the schema specification you will need to use. However if you
find some reason to need an entire schema, then set <code>pattern::$schema</code> instead
and do not set <code>pattern::$properties</code>.  <strong>The <code>required</code> keys is ignored when
validating a single key.</strong></p>

<pre><code>  protected $properties = [
    'title' =&gt; [
      'type' =&gt; 'string',
      'default' =&gt; 'Title Goes Here',
    ],
    'tag' =&gt; [
      'type' =&gt; 'string',
      'enum' =&gt; [
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6',
      ],
      'default' =&gt; 'h1',
    ],
  ];
</code></pre>

<h2>Validation of Objects Using FQN</h2>

<p>This module allows an extra layer of validation for objects, above what JSON
schema provides. You may indicate a fully-qualified classname to validate
against a given class or interface, such as in the following example. <em>Notice
type can be a string or an array of strings.</em></p>

<pre><code class="php">class Foo extends Pattern {

  protected $properties = [
    'account' =&gt; [
      'type' =&gt; '\Drupal\Core\Session\AccountInterface',
    ],
    'entity' =&gt; [
      'type' =&gt; [
        \Drupal\block_content\BlockContentInterface::class,
        \Drupal\node\NodeInterface::class,
      ],
    ],
  ];

}
</code></pre>

<h2><code>description</code> not comments</h2>

<p>Instead of commenting your code, add a <code>description</code> key to make a property note
or description.</p>

<p>Wrong:</p>

<pre><code>protected $properties = [
  // Leave this null if the first batch is already loaded. For autoclick loading, set this to an integer total number to load.  The caller should most likely be checking $_GET for this value!!!
  'load' =&gt; [
    'type' =&gt; ['null', 'integer'],
    'default' =&gt; NULL,
  ],
];
</code></pre>

<p>Right:</p>

<pre><code>protected $properties = [
  'load' =&gt; [
    'description' =&gt; 'Leave this null if the first batch is already loaded. For autoclick loading, set this to an integer total number to load.  The caller should most likely be checking $_GET for this value!!!',
    'type' =&gt; ['null', 'integer'],
    'default' =&gt; NULL,
  ],
];
</code></pre>
</section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager"><a href="dependency-injection.html" class="prev dependency-injection">&laquo;Patterns and Dependency Injection</a><a href="index.html" class="index pager__book-title">Render Patterns</a><a href="ROADMAP.html" class="next roadmap">Roadmap&raquo;</a></div>  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 8.x-2.1.0 &bull; Last Updated: Fri, 26 Mar 2021 22:23:04 -0700</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#tipue_search_input').tipuesearch()
    })
  </script>
<script src="js/core.js"></script>
</body>
</html>

